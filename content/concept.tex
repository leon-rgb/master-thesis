% !TeX spellcheck = en_US

\chapter{Concept}
\label{chap:concept}

In this chapter, we describe the intents defined for the smart home system chatbot. These intents aim to provide users with a versatile and intuitive interface for interacting with their smart home devices. The primary focus is on ensuring the chatbot can understand and respond to a wide range of user inputs, offering functionalities that surpass current smart home solutions.

\section{Intent Engineering}

Intents are fundamental to the functionality of the chatbot. Each intent represents a specific user request or command that the system needs to understand and act upon. The design of these intents considers the limitations of existing voice assistants and aims to provide a more flexible and user-friendly experience.

\subsection{Iteration 1: Basic Intents}

\paragraph{Providing Device Status}

\begin{itemize}
    \item \textbf{Intent Name:} GetDeviceStatus
    \item \textbf{Examples:}
    \begin{itemize}
        \item "What is the temperature in the living room?"
        \item "What is the status of the thermostat in the living room?"
        \item "Is it warm in the living room?"
    \end{itemize}
    \item \textbf{Entities:}
    \begin{itemize}
        \item DeviceType (e.g., thermostat, lights)
        \item Room (e.g., living room, bedroom)
    \end{itemize}
    \item \textbf{Action/Response:} Providing information about the specified device in the given room, such as the temperature and power status of a thermostat.
\end{itemize}

This intent aims to provide a more conversational approach to querying device statuses. Unlike existing solutions that require specific device names, our chatbot can understand various formulations, allowing users to ask for the temperature without needing to specify the exact device name or its location.

\paragraph{Changing Device Status}

\begin{itemize}
    \item \textbf{Intent Name:} SetDeviceStatus
    \item \textbf{Examples:}
    \begin{itemize}
        \item "Set the temperature to 22 degrees in the living room."
        \item "Turn off the lights in the bedroom."
        \item "Make it cooler in the kitchen."
    \end{itemize}
    \item \textbf{Entities:}
    \begin{itemize}
        \item DeviceType (e.g., thermostat, lights)
        \item Room (e.g., living room, bedroom)
        \item DesiredStatus (e.g., temperature, on/off state)
        \item DesiredValue (e.g., specific temperature, on/off)
    \end{itemize}
    \item \textbf{Action/Response:} Executing the specified action to set the desired status of the mentioned device in the given room, such as adjusting the temperature for a thermostat or turning lights on or off.
\end{itemize}

This intent enhances user experience by allowing natural language commands to control devices. The chatbot interprets a wider range of user commands, enabling users to control their devices more intuitively and without needing to remember specific device names.

\subsection{Iteration 2: Intermediate Intents}

\paragraph{Assistance for Creating Automations}

\begin{itemize}
    \item \textbf{Intent Name:} CreateAutomation
    \item \textbf{Examples:}
    \begin{itemize}
        \item "Set up an automation for turning off lights at 10 PM."
        \item "Create a rule to adjust thermostat settings when I leave home."
        \item "Can you help me with automating my smart blinds?"
        \item "Notify me if any windows are open."
    \end{itemize}
    \item \textbf{Entities:}
    \begin{itemize}
        \item DeviceType (e.g., lights, thermostat, blinds)
        \item TriggerEvent (e.g., time-based, occupancy, temperature change)
        \item Condition (optional, e.g., specific temperature threshold)
        \item Action (e.g., turn off, adjust settings)
        \item Location (optional, e.g., living room, bedroom)
    \end{itemize}
    \item \textbf{Action/Response:} Assisting the user in defining and setting up a smart home automation, including specifying the devices involved, the triggering event, any conditions, and the desired actions. The chatbot may also provide suggestions for common automation scenarios.
\end{itemize}

Creating automations is a common use case in smart home systems. This intent aims to streamline the process, allowing users to set up complex automations through simple conversational interactions, thus reducing the need for technical knowledge or precise phrasing.

\paragraph{Interpret the Device Control}

\begin{itemize}
    \item \textbf{Intent Name:} DeviceControlInterpretation
    \item \textbf{Examples:}
    \begin{itemize}
        \item "Why did the lights in the bathroom turn on just now?"
        \item "Can you explain the reason for the thermostat adjusting the temperature?"
        \item "What triggered the blinds to open in the living room?"
    \end{itemize}
    \item \textbf{Entities:}
    \begin{itemize}
        \item DeviceType (e.g., lights, thermostat, blinds)
        \item Location (optional, e.g., bathroom, living room)
        \item Action (e.g., turn on, adjust temperature, open)
        \item TriggerSource (e.g., automation, manual activation)
        \item Timestamp (optional, for specifying a time reference)
        \item Reason (optional, e.g., reason for an automation that the user provided when creating it)
    \end{itemize}
    \item \textbf{Action/Response:} Providing an explanation for recent smart home device actions. The chatbot interprets the cause of device events, distinguishing between automation-driven events and those triggered manually by the user. It may also consider time-based context when explaining device actions.
\end{itemize}

This intent addresses a gap in current systems by explaining the reasons behind device actions. It improves transparency and user trust in smart home systems by providing clear explanations for automated and manual device actions.

\subsection{Iteration 3: Complex Intents}

\paragraph{Analyzing Energy Consumption}

\begin{itemize}
    \item \textbf{Intent Name:} AnalyzeEnergyConsumption
    \item \textbf{Examples:}
    \begin{itemize}
        \item "Can you analyze the energy consumption in my home?"
        \item "Provide insights into power usage over the last week."
        \item "How can I optimize energy consumption in the living room?"
    \end{itemize}
    \item \textbf{Entities:}
    \begin{itemize}
        \item AnalysisType (e.g., overall consumption, specific devices)
        \item TimeFrame (e.g., last week, last month)
        \item Room (e.g., living room, kitchen)
    \end{itemize}
    \item \textbf{Action/Response:} Generating a detailed analysis of energy consumption based on the specified parameters. It includes insights into overall energy usage, specific device contributions, and recommendations for optimizing energy consumption in the specified room or timeframe.
\end{itemize}

Energy consumption analysis is a valuable addition to smart home capabilities. This intent provides users with actionable insights into their energy use, helping them to make informed decisions about energy efficiency and cost savings.


%% Auslagern in eigenes chapter??? %%
\section{Preleminary Interviews to Gain Knowledge, Requirements and Ideas}
Preceding to further actions Interviews with a few individuals were conducted to gain knowledge, requirements and ideas for this thesis.
All of the four interviewed were from different domains: One is a researcher and has knowledge in \gls{ai} technologies or more precisely about \glspl{llm} while the three other interviewees are from Bosch.
One of them is working in \qq{AskBosch} but also has expertise in the Smart Home and \gls{iot}. 
The other two are both from Bosch Smart Home where one is a Software Developer and the other a Product Developer.
Therefore a diverse group of interviewees has been formed.

The interview was designed to be open but some guided questions were formulated which were selected based on the domain of the interviewed since not all questions met every present domain.
For example it would have not make sense to ask a Smart Home Software Developer about recent tools or the architecture of \gls{llm}-based applications.
In the following all guided questions are listed:

\begin{enumerate}
    \item \textbf{Feasibility and Key Considerations} \\
    What are your thoughts on the feasibility of a smart home chatbot for providing explainability and enhancing user experience?
    \item \textbf{Interesting Intents}
    From your perspective, what could be interesting intents for a smart home chatbot to address complex user queries?    
    \item \textbf{Selected Intents}
    What is your opinion on the specific intents that have been selected for the chatbot development?    
    \item \textbf{Tools/Technologies/Models}
    In your research experience, what tools, technologies, or models would you recommend for developing a chatbot tailored for smart home applications?
    Would you chose a large language model and input context and user request into it or rather a NLP pipeline that chooses further actions based on the user request?   
    \item \textbf{Data Organization}
    How would you suggest organizing and feeding data to the chatbot, considering the complexity of smart home scenarios?    
    \item \textbf{Common Issues/Pitfalls}
    Based on your expertise, what are the common issues or pitfalls researchers may encounter when developing chatbots for specialized domains like smart homes?
    \item \textbf{Evaluation of Success}
    How would you propose evaluating the success of a smart home chatbot, especially in terms of providing explainability and user-centric interaction? 
    \item \textbf{Data Sources for the Chatbot}
    Can you identify potential sources from which data for the chatbot could be extracted to address user queries about the smart home?
    \item \textbf{Accessibility of Data}
    Do you foresee any challenges or limitations in accessing the identified data sources for the chatbot development?
           
\end{enumerate}

\subsection{Interview Summary}
\label{sec:interview_summary}

The following summary captures the insights and recommendations from these interviews.

\subsection{Feasibility and Key Considerations}

The feasibility of implementing a smart home chatbot was generally supported by all interviewees, albeit with some caveats:

\begin{itemize}
    \item \textbf{Technical Feasibility}: It is crucial to use proven frameworks and consider whether an LLM is necessary or if Named Entity Recognition (NER) would suffice, particularly given budget constraints. LLMs require significant resources, which may be impractical without a robust client-server architecture.
    \item \textbf{User Experience}: The chatbot must simplify user interactions with smart home devices, removing the need for exact device names and understanding user patterns for better automation.
    \item \textbf{Market Viability}: There are concerns about privacy and trust, which affect the acceptance of AI and chatbots in the market.
\end{itemize}

\subsubsection{Interesting and Selected Intents}

The interviewees proposed several useful intents for the chatbot:

\begin{itemize}
    \item \textbf{Device Control}: Activating or deactivating devices, querying the status of doors and windows, and setting temperatures.
    \item \textbf{Automation Assistance}: Simplifying the creation of automations, such as scheduling device operations and explaining device actions.
    \item \textbf{Energy Management}: Providing insights into energy consumption and optimization suggestions.
    \item \textbf{User-Specific Recommendations}: Customizing suggestions based on user behavior and preferences, such as recommending automations for commonly adjusted settings.
\end{itemize}

\subsubsection{Tools, Technologies, and Models}

Several tools and technologies were recommended for developing the chatbot:

\begin{itemize}
    \item \textbf{LLM vs. NER}: While LLMs offer broad capabilities, NER may be sufficient for specific use cases. But a LLm fine-tuned or customized to suit a specific application can also work out great.
    \item \textbf{Frameworks and Platforms}:  Tools like Microsoft Bot Framework\footnote{\url{https://github.com/microsoft/botframework-sdk}}, Conversational Language Understanding\footnote{\url{https://learn.microsoft.com/en-us/azure/ai-services/language-service/conversational-language-understanding/overview}}, Dialogflow\footnote{\url{https://cloud.google.com/dialogflow}}, and LangChain\footnote{\url{https://www.langchain.com/}} were mentioned as tools for different use cases. Except Dialogflow and the Azure Service Conversational Language Understanding they are open source. Potentially a Spring Boot\footnote{\url{https://spring.io/}} or Node.js\footnote{\url{https://nodejs.org/}} application could suit the use case of this thesis.
    \item \textbf{Data Management}: Organizing data with configurations that map intents to actions, and ensuring the chatbot can correctly interpret inputs is vital.
\end{itemize}

\subsubsection{Data Organization and Sources}

Effective data organization and source identification are a key aspect for achieving the desired chatbot functionality:

\begin{itemize}
    \item \textbf{Configurations and Scenarios}: Initial iterations should use predefined configurations, mapping intents to device actions.
    \item \textbf{Data Collection}: Gathering diverse user inputs to train models and create accurate annotations is essential for generalizability. They are also useful for the evaluation of the performance of the chatbot
    \item \textbf{Potential Sources}: Logs from smart home devices , external services, and user behavior data should be considered. For the beginning the most important data is about the devices of a user since it is crucial for all of the defined intents and the most essential part of a smart home.
\end{itemize}

\subsubsection{Common Issues and Pitfalls}

While the initial intention was to find out about general issues and pitfalls that often occur in the development of chatbot-powered applications in the interviews the direction 
Several potential challenges were highlighted:

\begin{itemize}
    \item \textbf{Complexity of Automations}: Creating sophisticated automations might be challenging and require a balance between simplicity and functionality.
    \item \textbf{Data Privacy and Trust}: Addressing user concerns about privacy and the reliability of AI-generated information is crucial.
    \item \textbf{Resource Constraints}: Ensuring sufficient computational resources for LLMs, if used, and managing the cost of development.
\end{itemize}

\subsubsection{Evaluation of Success}

The success of the smart home chatbot can be evaluated through:

\begin{itemize}
    \item \textbf{Performance Metrics}: Comparing expected outcomes with actual results using metrics like the F1 score.
    \item \textbf{User Experience}: Conducting user evaluations to assess satisfaction and the effectiveness of interactions.
    \item \textbf{Prototyping and Testing}: Iterative testing with real users to refine the chatbot's capabilities and ensure it meets user needs.
\end{itemize}

\subsection{Conclusion}

The interviews provided a comprehensive understanding of the requirements and considerations for developing a smart home system chatbot. Key insights include the importance of choosing the right technologies, ensuring robust data management, and addressing user privacy concerns. By focusing on practical intents and leveraging existing frameworks, the development of a user-friendly and effective smart home chatbot is achievable.


\section{Requirements}

\section{Idea}

\section{Architecture}

%\section{further parts of the prototype - NLP Pipeline, Integration into the Bosch SH App,...}

%\blinddocument
